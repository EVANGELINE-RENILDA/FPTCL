<div class="content-wrapper" appAccess="ORGRO">
    <app-multi-page-url [id]="id" url="/home/organization/registered-organization/detail/"></app-multi-page-url>
    <div class="sticky-card">
        <row>
            <div class="col-md-3"><view-label label="Organization  Ref No"
                    value="{{registeredOrganization.orgRefNo}}"></view-label></div>
            <div class="col-md-3"><view-label label="Organization Name"
                    value="{{registeredOrganization.organizationName}}"></view-label></div>

            <!-- <div class="col-md-3"><view-label label="Organization Ref No"
                    value="
            {{registeredOrganization.ientOrganization.orgRefNo?organizationApplication.ientOrganization.orgRefNo:'-'}}"></view-label></div> -->
            <!-- <div class="col-md-3"><view-label label="Application Status"
                    status="status-{{registeredOrganization}}"
                    statusValue="{{registeredOrganization}}"></view-label></div> -->
            <div class="col-md-2"><view-label label="Organization Type"
                    value="{{registeredOrganization.organizationTypeDescription}}"></view-label></div>
            <div class="col-md-2"><view-label label="Effective Date" value="
                            {{registeredOrganization.effectiveDate | appDate}}"></view-label></div>

            <!-- <div class="col-md-12 mb20"></div> -->


            <div class="col-md-2"><view-label label="Status" class="status-{{registeredOrganization.statusValue}}"
                    value="
           {{registeredOrganization.statusDescription}}"></view-label></div>
        </row>
    </div>
    <app-tab-group (tabChange)="onTabChange($event)">
        <app-tab tabTitle="Application">
            <accordion>
                <accordion-item [isOpen]="true">
                    <accordion-header>
                        <div class="accordion-header-content">
                            <div class="accordion-title">
                                <ion-icon name="notifications-outline"></ion-icon>
                                <div class="accordion-title-content">
                                    <div>Registered Organization Information</div>
                                </div>
                            </div>
                        </div>
                    </accordion-header>
                    <accordion-body>
                        <row>
                            <div class="col-md-8 border-right">
                                <div class="view-label-container-title mb26">
                                    <div class="view-label-container-title d-flex align-items-center">
                                        <ion-icon name="person-outline" class="pr5"></ion-icon>
                                        General Information
                                    </div>
                                </div>
                                <row>
                                    <div class="col-md-6 pb20"> <view-label label="Organization Name"
                                            value="{{registeredOrganization.organizationName}}"></view-label> </div>
                                    <div class="col-md-6 pb20"> <view-label label="Organization Type"
                                            value="{{registeredOrganization.organizationTypeDescription}}"></view-label>
                                    </div>
                                    <div class="col-md-6 pb20"> <view-label label="Email ID
                                    " value="{{registeredOrganization.emailId}}"></view-label> </div>
                                    <div class="col-md-6 pb20"> <view-label label="Contact No
                                    " value="{{registeredOrganization.contactNo}}"></view-label> </div>
                                    <div class="col-md-6 pb20"> <view-label label="Website"
                                            value="{{registeredOrganization.website}}"></view-label>
                                    </div>
                                    <div class="col-md-6 pb20"> <view-label label="Effective Date"
                                            value="{{registeredOrganization.effectiveDate | appDate}}"></view-label>
                                    </div>
                                    <div class="col-md-6 pb20"> <view-label label="Application Status"
                                            value="{{registeredOrganization.statusDescription}}"></view-label> </div>

                                </row>
                            </div>
                            <div class="col-md-4">
                                <div class="view-label-container-title mb26">
                                    <div class="view-label-container-title d-flex align-items-center">
                                        <ion-icon src="assets/icons/location.svg" class="pr5"></ion-icon>
                                        Organization Address
                                    </div>
                                </div>
                                <div class="pl10">
                                    <view-label
                                        value="{{registeredOrganization.ipermanentAddress.line1}} &nbsp;{{registeredOrganization.ipermanentAddress.line2}} &nbsp; {{registeredOrganization.ipermanentAddress.line3}} "></view-label>
                                </div>
                                <div class="pl10">
                                    <view-label
                                        value="{{registeredOrganization.ipermanentAddress.provinceDescription}} &nbsp;{{registeredOrganization.ipermanentAddress.islandDescription}} &nbsp;"></view-label>
                                </div>
                                <div class="mb20 pl10">
                                    <view-label
                                        value="{{registeredOrganization.ipermanentAddress.tikinaDescription}} &nbsp; {{registeredOrganization.ipermanentAddress.village}} &nbsp;  {{registeredOrganization.ipermanentAddress.poBoxNo}}"></view-label>
                                </div>
                            </div>
                            <!-- <div class="col-md-12 end">
                                <app-icon-button name="edit" toolTip="Edit" (click)="orgAppInfo()"></app-icon-button>
                            </div> -->
                        </row>
                    </accordion-body>
                </accordion-item>
                <accordion-item [isOpen]="true">
                    <accordion-header>
                        <div class="accordion-header-content">
                            <div class="accordion-title">
                                <ion-icon name="notifications-outline"></ion-icon>
                                <div class="accordion-title-content">
                                    <div>Contact Person</div>
                                </div>
                            </div>
                        </div>
                    </accordion-header>
                    <accordion-body>
                        <div class="outer-content-wrapper">
                            <div class="content-wrapper">

                                <app-table [pagination]="pagination" [columns]="contactColumns"
                                    [columnsName]="contactColumnsName" [dataSource]="tableContactData"
                                    [hideSelectAll]="true" [hasPagination]="true" columnID="organizationApplicationId">
                                    <!-- <ng-template cellDef="action">
                                        <app-icon-button name="open" toolTip="open"
                                            (click)="contactDialog()"></app-icon-button>
                                    </ng-template> -->
                                    <!-- <ng-template #slotRight>
                                        <app-icon-button name="add" toolTip="Add New" (click)="createOrganizationContact()">
                                        </app-icon-button>
                                    </ng-template> -->
                                    <ng-template cellDef="bname" let-element>
                                        {{element.contactPersonName}}
                                    </ng-template>
                                    <ng-template cellDef="bCode" let-element>
                                        {{element.designation}}
                                    </ng-template>
                                    <ng-template cellDef="brName" let-element>
                                        {{element.emailId}}
                                    </ng-template>
                                    <!-- <ng-template cellDef="status" let-element>
                                        {{element.statusDescription}}
                                    </ng-template> -->
                                    <ng-template cellDef="status" let-element>
                                        <accouts-status-table
                                            [statusDescription]="element.statusDescription"></accouts-status-table>
                                    </ng-template>
                                    <ng-template cellDef="action" let-element>
                                        <app-icon-button name="open" toolTip="Open"
                                            (click)="openRegisteredOrganizationContactPerson(element.organizationContactPersonId)"></app-icon-button>
                                    </ng-template>
                                </app-table>

                            </div>
                        </div>
                    </accordion-body>
                </accordion-item>
                <accordion-item [isOpen]="true">
                    <accordion-header>
                        <div class="accordion-header-content">
                            <div class="accordion-title">
                                <ion-icon name="notifications-outline"></ion-icon>
                                <div class="accordion-title-content">
                                    <div>Bank</div>
                                </div>
                            </div>
                        </div>
                    </accordion-header>
                    <accordion-body>
                        <div class="outer-content-wrapper">
                            <div class="content-wrapper">

                                <app-table [pagination]="pagination" [columns]="bankColumns"
                                    [columnsName]="bankColumnsName" [dataSource]="tableBankData" [hasPagination]="true"
                                    [hideSelectAll]="true" columnID="organizationApplicationId">
                                    <ng-template cellDef="action" let-element>
                                        <app-icon-button name="open" toolTip="open"
                                            (click)="openRegisteredOrganizationBankDetail(element.organizationBankDetailId)"></app-icon-button>
                                    </ng-template>
                                    <!-- <ng-template #slotRight>
                                        <app-icon-button name="add" toolTip="Add New" (click)="createOrganizationBank()">
                                        </app-icon-button>
                                    </ng-template> -->
                                    <ng-template cellDef="bname" let-element>
                                        {{element.ientBank.bankName}}
                                    </ng-template>
                                    <ng-template cellDef="bCode" let-element>
                                        {{element.ientBank.bankCode}}
                                    </ng-template>
                                    <ng-template cellDef="brName" let-element>
                                        {{element.ientBank.ifscCode}}
                                    </ng-template>
                                    <ng-template cellDef="status" let-element>
                                        <div class="status-{{element.statusValue}}">{{element.statusDescription}}</div>
                                    </ng-template>


                                </app-table>

                            </div>
                        </div>
                    </accordion-body>
                </accordion-item>
            </accordion>
        </app-tab>
        <app-tab tabTitle="Document">
            <accordion>
                <accordion-item [isOpen]="true">
                    <accordion-header>
                        <div class="accordion-header-content">
                            <div class="accordion-title">
                                <ion-icon name="notifications-outline"></ion-icon>
                                <div class="accordion-title-content">
                                    <div>Document</div>
                                </div>
                            </div>
                        </div>
                    </accordion-header>
                    <accordion-body>
                        <div class="outer-content-wrapper">
                            <div class="content-wrapper">
                                <row>
                                    <div class="col-md-12  mb20">
                                        <div class="outer-content-wrapper">
                                            <div class="content-wrapper">
                                                <div>
                                                    @if (loading) {
                                                    <app-table [columns]="documentColumns"
                                                        [columnsName]="documentColumnsName"
                                                        [dataSource]="tabledocumentData" [hideSelectAll]="true"
                                                        [showPaginator]="false" columnID="trustApplicationDocumentId">
                                                        <ng-template cellHeaderDef="fileName" let-element>
                                                            <div class="w200px">
                                                               File Name
                                                            </div>
                                                        </ng-template>
                                                        <ng-template cellDef="documentTypeDescription" let-element>
                                                            <div class="overflow-wrap">
                                                                {{element.documentTypeDescription}}
                                                            </div>
                                                        </ng-template>
                                                        <ng-template cellDef="fileName" let-element>
                                                            <div class="overflow-wrap">
                                                                {{element.ientFile.fileName}}
                                                            </div>
                                                        </ng-template>
                                                        <ng-template cellHeaderDef="documentTypeDescription">
                                                            <div class="w200px">Document Name</div>
                                                        </ng-template>

                                                        <ng-template cellDef="fileSize" let-element>
                                                            {{element.ientFile.fileSize}}
                                                        </ng-template>
                                                        <ng-template cellHeaderDef="action">
                                                            <div class="text-center">
                                                                Action
                                                            </div>
                                                        </ng-template>
                                                        <ng-template cellDef="action" let-element>
                                                            @if(element.ientFile.fileName!==''){

                                                            <div class="d-flex justify-content-center  ">
                                                                <!--  (click)="downloadFile(element)" -->
                                                                <app-icon-button name="doc-download"
                                                                    (click)="downloadFile(element)">

                                                                </app-icon-button>
                                                                <!-- @if(this.type.isEditable === 'Y'){ -->

                                                                <!-- <app-icon-button name="doc-delete" (click)="checkDocumentDelete(element)" /> -->
                                                                <!-- } -->

                                                                <!--  (click)="viewFile(element)" -->
                                                                <app-icon-button name="doc-view"
                                                                    (click)="viewFile(element)">

                                                                </app-icon-button>
                                                            </div>
                                                            }
                                                        </ng-template>
                                                    </app-table>
                                                    }
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 mt10">
                                        <!-- <div class="box" style="padding: 8px 16px;"> -->
                                        <!-- <div class="mb20"></div> -->
                                        <!-- <div class="col-md-12">
                                                <app-input-control type="select"
                                                    label="Document Type"></app-input-control>
                                            </div> -->
                                        <!-- <app-drop-zone type="1"></app-drop-zone> -->
                                        <!-- </div> -->
                                        <div class="mb26"></div>
                                    </div>
                                    <div class="pb10"></div>

                                    <!-- <div class="horizontal-tab hori-active w100px">Notes</div>
                                              <div class="border p10">

                                                  <div class="justify-content-end d-flex">
                                                      <app-icon-button name="add" toolTip="Create"
                                                          (click)="createNotesDialog()"></app-icon-button>
                                                  </div>
                                                  <div class="p16px"></div>
                                                  <div class="notes-list">
                                                      @for (item of notesList; track $index) {
                                                      <div class="border-bottom notes-list">
                                                          <div class="mx10 notes-desc">{{item.notes}}</div>
                                                          <div class="d-flex justify-content-end notes-context">
                                                              <div style="padding-right:5px ;">
                                                                  {{item.enteredByFullname}}</div>
                                                              <div class=" notes-border-left">
                                                                  {{item.enteredDate |appDate}} {{item.enteredDate |appDate: 'hh:mm
                                                                  a'}}
                                                              </div>
                                                              <div style="padding-right:5px ;"></div>
                                                              <div class=" notes-border-left status-{{item.statusValue}}">
                                                                  {{item.statusDescription}}
                                                              </div>
                                                              <div class="card-1-header-label px-2 ">

                                                              </div>
                                                          </div>
                                                      </div>
                                                      }
                                                  </div>
                                              </div> -->



                                </row>
                            </div>
                        </div>
                    </accordion-body>
                </accordion-item>
            </accordion>
        </app-tab>

    </app-tab-group>



</div>

<ng-template #bank>
    <div class="dialog-container">

        <div class="dialog-header">
            <div class="dialog-title"> <ion-icon class="dialog-header-icon" src="assets/icons/reg-org.svg"></ion-icon>
                Registered Organization <ion-icon class="arrow-icon"
                    src="assets/icons/arrow.svg"></ion-icon>Details<ion-icon class="arrow-icon"
                    src="assets/icons/arrow.svg"></ion-icon>
                View
                Bank
            </div>
            <div class="slot-right">
                <div class="btn-group">
                    <!-- <app-icon-button name="edit" toolTip="Edit"
                        ></app-icon-button> -->
                    <app-icon-button name="close" toolTip="Close" (click)="dialog.closeDialog()"></app-icon-button>
                </div>
            </div>
        </div>

        <div class="dialog-content">
            <div class="dialog-content-inner h100">
                <scroll>
                    <div class="p10">
                        <row>
                            <div class="col-md-4">
                                <div class="box h100">
                                    <div class="box-header">
                                        Bank Information
                                    </div>
                                    <div class="box-pad">
                                        <row>
                                            <div class="col-md-12"><view-label label="Bank Name" class="mb26"
                                                    value="{{registeredBank.ientBank.bankName}}"></view-label></div>
                                            <div class="col-md-12"><view-label label="Bank Code" class="mb26"
                                                    value="{{registeredBank.ientBank.bankCode}}"></view-label></div>
                                            <!-- <div class="col-md-12"><view-label label="Branch " class="mb26"
                                                    value="{{registeredBank.ientBank.branchTypeDescription}}"></view-label>
                                            </div> -->

                                            <div class="col-md-12"><view-label label="Swift Code" class="mb26"
                                                    value="{{registeredBank.ientBank.swiftCode}}"></view-label></div>
                                            <!-- <div class="col-md-12"><view-label label="IFSC Code" class="mb26"
                                                    value="{{registeredBank.ientBank.ifscCode}}"></view-label></div> -->


                                        </row>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="box h100">
                                    <div class="box-header ">
                                        Additional Information
                                    </div>
                                    <div class="box-pad">
                                        <row>
                                            <div class="col-md-12"><view-label label="Account No" class="mb26"
                                                    value="{{registeredBank.accountNo}}"></view-label></div>
                                            <!-- <div class="col-md-12"><view-label label="Effective Date " class="mb26"
                                                    value="{{organizationBank.ientBank.date  | appDate}}"></view-label>
                                            </div> -->
                                            <div class="col-md-12"><view-label label="Account Status  "
                                                    class="mb26 status-{{registeredBank.statusValue}}"
                                                    value="{{registeredBank.statusDescription}}"></view-label></div>
                                        </row>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="box h100">
                                    <div class="box-header ">
                                        Bank Address
                                    </div>
                                    <div class="box-pad">
                                        <row>
                                            <div class="col-md-12"><view-label label="Line 1" class="mb26"
                                                    value="{{registeredBank.ientBank.ientAddress.line1}}"></view-label>
                                            </div>
                                            <div class="col-md-12"><view-label label="Line 2" class="mb26"
                                                    value="{{registeredBank.ientBank.ientAddress.line2}}"></view-label>
                                            </div>
                                            <div class="col-md-12"><view-label label="Line 3 " class="mb26"
                                                    value="{{registeredBank.ientBank.ientAddress.line3}}"></view-label>
                                            </div>

                                            <div class="col-md-12"><view-label label="Province" class="mb26"
                                                    value="{{registeredBank.ientBank.ientAddress.provinceDescription}}"></view-label>
                                            </div>
                                            <div class="col-md-12"><view-label label="Island" class="mb26"
                                                    value="{{registeredBank.ientBank.ientAddress.islandDescription}}"></view-label>
                                            </div>
                                            <div class="col-md-12"><view-label label="Tikina" class="mb26"
                                                    value="{{registeredBank.ientBank.ientAddress.tikinaDescription}}"></view-label>
                                            </div>
                                            <div class="col-md-12"><view-label label="Village" class="mb26"
                                                    value="{{registeredBank.ientBank.ientAddress.village}}"></view-label>
                                            </div>
                                            <div class="col-md-12"><view-label label="PO Box No" class="mb26"
                                                    value="{{registeredBank.ientBank.ientAddress.poBoxNo}}"></view-label>
                                            </div>

                                        </row>
                                    </div>
                                </div>
                            </div>
                        </row>



                    </div>
                </scroll>

            </div>
        </div>

    </div>
</ng-template>

<ng-template #contact>
    <div class class="dialog-container">
        <div class="dialog-header">
            <div class="dialog-title"> <ion-icon class="dialog-header-icon" src="assets/icons/reg-org.svg"></ion-icon>
                Registered Organization <ion-icon class="arrow-icon"
                    src="assets/icons/arrow.svg"></ion-icon>Details<ion-icon class="arrow-icon"
                    src="assets/icons/arrow.svg"></ion-icon>
                View
                Contact
            </div>
            <div class="slot-right">
                <div class="btn-group">
                    <!-- <app-icon-button name="edit" toolTip="Edit"
                        ></app-icon-button> -->
                    <app-icon-button name="close" toolTip="Close" (click)="dialog.closeDialog()"></app-icon-button>
                </div>
            </div>
        </div>

        <div class="dialog-content ">
            <div class="pb15"></div>
            <div class="dialog-content-inner">
                <scroll>
                    <row>
                        <div class="col-md-6">
                            <div class="box h100">
                                <div class="box-header ">Contact Person Details</div>
                                <div class=" box-pad">
                                    <view-label label="Contact Person Name"
                                        [value]="registeredContact .contactPersonName" class="pb15"></view-label>
                                    <view-label label="Contact No" [value]="registeredContact .contactNo"
                                        class="pb15"></view-label>
                                    <view-label label="Email ID" [value]="registeredContact .emailId"
                                        class="pb15"></view-label>
                                    <view-label label="Designation" [value]="registeredContact .designation"
                                        class="pb15"></view-label>
                                    <view-label label="Date Of Birth"
                                        value="{{registeredContact .dateOfBirth | appDate}}" class="pb15"></view-label>
                                    <view-label label="Gender" class="pb15"
                                        [value]="registeredContact .genderDescription"></view-label>
                                    <view-label label="Status" class="pb15"
                                        [value]="registeredContact .statusDescription"></view-label>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="box h100">
                                <div class="box-header ">Contact Person Identification Details</div>
                                <div class=" box-pad">
                                    <!-- <view-label label="National ID" [value]="registeredContact .nationalId"
                                        class="pb15"></view-label> -->
                                    <view-label label="Voter ID" [value]="registeredContact .voterId"
                                        class="pb15"></view-label>
                                    <view-label label="Driving License" [value]="registeredContact .drivingLicense"
                                        class="pb15"></view-label>
                                    <view-label label="PF No" [value]="registeredContact .pfNo"
                                        class="pb15"></view-label>
                                </div>
                            </div>
                        </div>
                    </row>
                </scroll>
            </div>

        </div>
    </div>
</ng-template>

<ng-template #breadCrumb>
    <div class="breadcrumb">
        <ul>
            <li class="screen-name link">
                <div class="back-btn"> <ion-icon src="assets/icons/back.svg" (click)="navigateToList()"></ion-icon>
                </div>
                <ion-icon src="assets/icons/will.svg"></ion-icon>
                <div class="screen-text">Registered Organization Application</div>
            </li>
            <li class="screen-name">
                <div class="screen-text">Details</div>
            </li>
        </ul>
    </div>
</ng-template>

<ng-template #Template>
    <div class="ab bgc">
        <div class="rel">
            <div class="p-fix d-flex">
                <div class="download-button">
                    <button color="primary" (click)="downloadImageFile()">
                        Download
                    </button>
                </div>
                <div class="close-button">
                    <button color="danger" (click)="dialog.closeDialog()">
                        Close
                    </button>
                </div>

            </div>
            <div class="d-flex align-items-center h100 justify-content-center w100">
                <div class="d-flex align-items-center h100 justify-content-center w100 relative">
                    <div class="ab">
                        <div class="rel">
                            <div class="dis-none wcheck active">
                                <img [src]="filePath" alt="PreviewImages">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>
