<accordion-item [isOpen]="true">
    <accordion-header>
        <div class="accordion-header-content">
            <div class="accordion-title">
                <ion-icon src="assets/icons/accordian/client-doc.svg"></ion-icon>
                <div class="accordion-title-content">
                    <div>Interview Testator / Testatrix</div>
                </div>
            </div>
        </div>
    </accordion-header>
    <accordion-body>
        <div class="bg-white-padd">
       
                    <div class="outer-content-wrapper">
                        <div class="content-wrapper">
                            <row>
                                <div class="col-md-9">
                                    <row>
                                        <div class="col-md-4"> <view-label label="Assigned Officer"
                                                value="{{application.ientWillApplicationAssignedOfficerHistory.assignedToFullname}}"></view-label>
                                        </div>
                                        <div class="col-md-4"> <view-label label="Assigned Date"
                                                value="{{application.ientWillApplicationAssignedOfficerHistory.assignedDate | appDate}}"></view-label>
                                        </div>
                                        <div class="col-md-4">
                                            <!-- <view-label label="TAT"
                                                value=" {{application.ientWillApplicationAssignedOfficerHistory.tatDays}} Days"></view-label> -->
                                        </div>
                                    </row>
                                </div>
                                <div class="col-md-3">
                                    <div class="d-flex">
                                      @if(this.application.assignedOfficerFlag === 'True'){
                                          @if(this.application.reAssignFlag === 'True'){
                                      <form #p="ngForm" class="col-md-10 w250">
                                        <app-input-control type="select" key="constant" keyName="description"
                                        placeholder="Officer" [items]="assignedOfficerDDL"
                                        defaultOption="--Select--"
                                        [(ngModel)]="willApplicationAssignedOfficer.assignedTo"
                                        name="assignedTo" ></app-input-control>
                                      
                                      </form>
                                      <div class="col-md-2"><app-icon-button name="reassign" toolTip="Reassign" (click)="reAssignWill()"></app-icon-button></div>
                                       } 
                                          @if(this.application.selfAssignFlag ===' True'){
                                          <div class="col-md-2"><app-icon-button name="add" (click)="selfAssignWill()"
                                                  toolTip="Self Assign"></app-icon-button></div>
                                          }
                                      }
                                    </div>
                                  </div>
                            </row>
                            <div class="mb20"></div>
                            <div class="box h100">
                                <div class="box-header"><ion-icon name="checkmark-circle-outline" class="pr10"></ion-icon>
                                  Checklist
                                </div>
                                <div class="box-pad">
                  
                                  <row>
                                    <div class="col-md-5 lh25">
                                      1. Whether He/ She is in Death bed <br>
                                      2. Wheteher He/ She can able to understand the terms <br>
                                      3. Whether He/She has the Mental Ability <br>
                                      4. Whether He/ She is a oldage person <br>
                                      5. Whether He/ She is in Illness <br>
                                      6. Whether He/ She has difficulty in communication <br>
                                      7. Whether doctor opinion required
                                    </div>
                                    <div class="col-md-1">
                                      <app-checkbox [checked]="application.ientWillApplicationTestatorStatus.isDeathBed === 'Y'" (change)="isDeathBedCheck($event)"></app-checkbox>
                      <app-checkbox [checked]="application.ientWillApplicationTestatorStatus.isUnderstandable === 'Y'" (change)="isUnderstandableCheck($event)"></app-checkbox>
                                      <app-checkbox [checked]="application.ientWillApplicationTestatorStatus.isMentalAbility === 'Y'" (change)="isMentalAbilityCheck($event)"></app-checkbox>
                                      <app-checkbox [checked]="application.ientWillApplicationTestatorStatus.isOldAge === 'Y'" (change)="isOldAgeCheck($event)"></app-checkbox>
                                      <app-checkbox [checked]="application.ientWillApplicationTestatorStatus.isIllness === 'Y'" (change)="isIllnessCheck($event)"></app-checkbox>
                                      <app-checkbox [checked]="application.ientWillApplicationTestatorStatus.isDifficultyInCommunication === 'Y'" (change)="isDifficultyInCommunicationCheck($event)"></app-checkbox>
                                      <app-checkbox [checked]="application.ientWillApplicationTestatorStatus.isDoctorOpenionRequired === 'Y'" (change)="isDoctorOpenionRequiredCheck($event)"></app-checkbox> 
                                    </div>
                                    <div class="col-md-5 lh25">
                                      8. Whether He/She is influenced by others <br>
                                      9. Whether Assistance Required<br>
                                      10. Is Assistance from family<br>
                                 
  
                                    </div>
                                    
                                    <div class="col-md-1">
                                      <app-checkbox [checked]="application.ientWillApplicationTestatorStatus.isInfluencedByOthers === 'Y'" (change)="isInfluencedByOthersCheck($event)"></app-checkbox>
                                      <app-checkbox [checked]="application.ientWillApplicationTestatorStatus.isRequireAssistance === 'Y'" (change)="isRequireAssistanceCheck($event)"></app-checkbox>
                                      <app-checkbox [checked]="application.ientWillApplicationTestatorStatus.isAssistanceFromFamily === 'Y'" (change)="isAssistanceFromFamilyCheck($event)"></app-checkbox>
                                     
                                 
                                    </div>
                                    <div class="pb16"></div>
                                   <div class="d-flex justify-content-between w97 ">
                                    <form  #p="ngForm">
                                        <app-input-control type="text" label="Assistance Name" [(ngModel)]="application.ientWillApplicationTestatorStatus.assistanceName" name="assistanceName" [errorTrue]="application.ientWillApplicationTestatorStatus.isRequireAssistance === 'Y' && errorTrue" [required]="application.ientWillApplicationTestatorStatus.isRequireAssistance === 'Y'"></app-input-control>
                                    </form>
                                    @if(this.type.isEditable === 'Y' && application.assignedOfficerFlag === 'True'
                                    && application.statusValue!=='WCNLD'){
                                    <app-icon-button name="save" toolTip="Save" (click)="saveWillInterviewCheckbox()"></app-icon-button>                              
                                }
                                   </div>


                                
                                
                                  </row>
                                </div>
                              </div>
                            <div class="mb20"></div>
                            <row>
                                <div class="col-md-4 ">
                                    <div class="box" style="padding: 8px 16px;">
                                        <div class="mb20"></div>
                                        <div class="col-md-12">
                                            <app-input-control type="select" label="Document Type"
                                                [(ngModel)]="willApplicationDocument.documentTypeValue"
                                                [items]="documentArray" key="code" defaultOption="--Select--"
                                                name="documentTypeValue" [btnClicked]="this.type.isEditable !== 'Y' "
                                                keyName="fullName"></app-input-control>
                                        </div>
                                        <app-drop-zone type="1" [fileType]="fileExtension" [accept]="accept"
                                            [multiple]="false" 
                                            (onUpload)="uploadClientDocumentAttachment($event)"></app-drop-zone>
                                    </div>
                                    <div class="mb26"></div>

                                </div>
                                <div class="col-md-8">
                                    <div class="outer-content-wrapper">
                                        <div class="content-wrapper">
                                            <div>
                                                <!-- @if (loading) { -->
                                                <!--  [dataSource]="application.lstentTrustApplicationDocument | trustApplicationPipe: this.type.trustApplicationStageValue: this.type.trustApplicationIdenityNo" -->
                                                <app-table [columns]="supportDocumentColumns"
                                                    [dataSource]="application.lstentWillApplicationDocument| willApplicationPipe: this.type.stageValue: this.type.identityNo"
                                                    [columnsName]="supportDocumentColumnsName" [hideSelectAll]="true"
                                                    [showPaginator]="false" columnID="trustApplicationDocumentId">
                                                    <ng-template cellHeaderDef="fileName">
                                                        <div class="w200px">
                                                            File Name
                                                        </div>
                                                    </ng-template>
                                                    <ng-template cellDef="fileName" let-element>
                                                        <div class="overflow-wrap">
                                                            {{element.ientFile.fileName}}
                                                        </div>
                                                    </ng-template>
                                                    <ng-template cellHeaderDef="documentTypeDescription">
                                                        <div class="w200px">Document Name</div>
                                                    </ng-template>
                                                    <ng-template cellDef="fileExtension" let-element>
                                                        {{element.ientFile.fileExtension}}
                                                    </ng-template>
                                                    <ng-template cellDef="fileSize" let-element>
                                                        {{element.ientFile.fileSize | fileSize}}mb
                                                    </ng-template>
                                                    <ng-template cellHeaderDef="action">
                                                        <div class="text-center">
                                                            Action
                                                        </div>
                                                    </ng-template>
                                                    <ng-template cellDef="action" let-element>
                                                        @if(element.ientFile.fileName!==''){

                                                        <div class="d-flex align-items-center justify-content-center ">
                                                            <app-icon-button name="doc-view"
                                                            (click)="viewFile(element)">
                                                        </app-icon-button>
                                                            <app-icon-button name="doc-download"
                                                                (click)="downloadFile(element)">

                                                            </app-icon-button>
                                                            @if(this.type.isEditable === 'Y'){

                                                            <app-icon-button name="doc-delete"
                                                                (click)="checkDocumentDelete(element)" />
                                                            }


                                                           
                                                        </div>
                                                        }
                                                    </ng-template>
                                                </app-table>
                                                <!-- } -->
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </row>
                            <div class="pb10"></div>
                            <form #notiForm="ngForm">
                                <row>
                                    <div class="col-md-12">
                                        <app-input-control type="textarea" className="notes" [errorTrue]="errorTrue"
                                            [maxLength]="250" [required]="true" label="Notes" [(ngModel)]="notesMessage"
                                            name="notesMessage"></app-input-control>
                                    </div>
                                    <div class="col-md-12 mb26 gap-10 end">
                                        @if(this.type.isEditable === 'Y' && application.assignedOfficerFlag === 'True'
                                        && application.statusValue!=='WCNLD'){
                                                       <app-icon-button name="save" toolTip="Save" (click)="saveNotes()"></app-icon-button>

                                        }
                                        <!-- @if(trustSettlementNotes.isUpdateButtonShow ==='Y'){
                                    <app-icon-button name="save" toolTip="Update" (click)="saveTrustApplication()"></app-icon-button>
                                    <app-icon-button name="refresh" toolTip="Refresh" (click)=" refeshData()"></app-icon-button>
                                    }
                                    @else {
                    
                                    <app-icon-button name="clear" toolTip="Clear" (click)="clearCourtOrderNotes()"></app-icon-button>
                                    } -->
                                    </div>
                                    <div class=""></div>
                                </row>
                            </form>
                        </div>
                    </div>
        
   
        </div>
        <div class="col-md-12 end gap-10">
            @if(this.type.isEditable === 'Y' && application.assignedOfficerFlag === 'True' &&
            application.statusValue!=='WCNLD'){
            <button type="submit" class="complete-btn" (click)="cancelProcess()">Cancel</button>
            <button type="submit" class="approve-btn" (click)="completeApplicationStage()">Interview Completed</button>
            }
        </div>
    </accordion-body>
</accordion-item>

<ng-template #Template>
    <div class="ab bgc">
        <div class="rel">
            <div class="p-fix d-flex">
                <div class="download-button">
                    <button color="primary" (click)="downloadImageFile()">
                        Download
                    </button>
                </div>
                <div class="close-button">
                    <button color="danger" (click)="dialog.closeDialog()">
                        Close
                    </button>
                </div> 

            </div>
            <div class="d-flex align-items-center h100 justify-content-center w100">
                <div class="d-flex align-items-center h100 justify-content-center w100 relative">
                    <div class="ab">
                        <div class="rel">
                            <div class="dis-none wcheck active">
                                <img [src]="filePath" alt="PreviewImages">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #notesCancelDialog>
    <div class="dialog-container">
        <div class="dialog-header">
            <div class="dialog-title">
                <ion-icon class="fos-20" src="assets/icons/trust.svg"></ion-icon>
                Reason For Cancellation
            </div>
            <div class="slot-right">
                <div class="btn-group">
                    <app-icon-button name="save" toolTip="Save" (click)="cancelApplicationStage()"></app-icon-button>
                    <app-icon-button name="clear" toolTip="Clear" (click)="clearCancelNotes()"></app-icon-button>
                    <app-icon-button name="close" toolTip="Close" (click)="dialogClose()"></app-icon-button>
                </div>
            </div>
        </div>
        <div class="dialog-content">
            <div class="dialog-content-inner h100">
                @if(data.showErrorMessage){
                <div class="error-panel">
                    <app-error-message></app-error-message>
                </div>
                }
                <form #x="ngForm">
                    <row>

                        <div class="col-md-12 mb26">
                            <app-input-control type="textarea" className="notes" [errorTrue]="errorTrue"
                                [(ngModel)]="cancelNotesDescription" name="cancelNotesDescription" [maxLength]="250"
                                [required]="true" label="Notes"></app-input-control>
                        </div>
                    </row>
                </form>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #cancelAlert>
    <div class="dialog-container">
        <div class="dialog-content">
            <div class="dialog-content-inner">
                <div class="notification-header">
                    <div class="notification-icon">
                        <ion-icon name="warning-outline"></ion-icon>
                    </div>
                    <div class="notification-title">Alert</div>
                </div>
                <div class="text-center p10">
                    Are you sure you want to cancel this process
                </div>
                <div class="center">
                    <div class="notification-button">
                        <button class="btn-notification" (click)="cancelNotesDialog()">Yes</button>
                        <button class="btn-notification cancel-btn" (click)="dialog.closeAll()">No</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>