<ng-template #breadCrumb>
  <div class="breadcrumb">
    <ul>
      <li class="screen-name link">
        <div class="back-btn" (click)="navigateToList()"> <ion-icon src="assets/icons/back.svg"></ion-icon></div>
        <ion-icon src="assets/icons/finance.svg"></ion-icon>
        <div class="screen-text" (click)="navigateToTrust()">Trust</div>
      </li>
      <li class="screen-name link">
        <div class="screen-text" (click)="navigateToList()">Journal Trust And Estate</div>
      </li>
      <li class="screen-name">
        <div class="screen-text">Details</div>
      </li>
    </ul>
  </div>
</ng-template>

<div class="content-wrapper">
  @if(journalTrustEstate.transactionPostingId!==0 && journalTrustEstate.isDirectApproval==='Y'){
    @if(( journalTrustEstate.statusValue==='PDNVR') && journalTrustEstate.isDirectApproval === 'Y'  ){

  <div class="col-md-1 ml-auto m-8px" appButtonAccess="JornlVochrReversNewBtn">
    <button type="submit" class="approve-btn" (click)="saveTransactionPostingNotes('APPRD')">Complete</button>

  </div>
}
  }
  @if(journalTrustEstate.transactionPostingId!==0){
  @if(journalTrustEstate.statusValue==='APPRD'){
  <div class="col-md-1 ml-auto m-8px" appButtonAccess="JornlVochrReversNewBtn">
    <button type="submit" class="complete-btn" (click)="saveTransactionPostingNotes('APPRD')">Cancel</button>

  </div>

  }
  }

  <app-multi-page-url [id]="" url="/home/trust/trust-application/detail"></app-multi-page-url>                                                            
  <div class="card">
    <div class="cus-card">
      <div class="item-content">
        <table>
          <tr>
            <td>
              <div class="t-head">Document Number</div>
              <div class="t-body">{{journalTrustEstate.documentNumber ? journalTrustEstate.documentNumber:"-"}}</div>
            </td>
          </tr>
          <tr>
            <td>
              <div class="t-head">Document Date</div>
              <div class="t-body">{{journalTrustEstate.documentDate ? (journalTrustEstate.documentDate | appDate):"-" }}
              </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="item-content">
        <table>
          <tr>
            <td>
              <div>
                <label class="branch">Branch Name</label>
                <div class="branch-value">
                  {{branchName ? branchName : '-'}}

                </div>
              </div>
            </td>
          </tr>
          <tr>
            <td>
              <div class="t-head"> Amount ({{currencyVal}})</div>
              <div class="t-body">  {{ journalTrustEstate.inputValue | appCurrency}}</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="item-content">
        <table>
          <tr class="v-flex">
            <td>
              <div class="t-head">Created By</div>
              <div class="t-body el" [matTooltip]="journalTrustEstate.enterByFullName" [matTooltipPosition]="'above'">
                {{journalTrustEstate.enterByFullName ? journalTrustEstate.enterByFullName:"-"}}</div>
            </td>
          </tr>
          <tr class="v-flex">
            <td>
              <div class="t-head">Created Date</div>
              <div class="t-body">{{journalTrustEstate.enteredDate ? (journalTrustEstate.enteredDate | appDate):"-"}}
              </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="item-content">
        <table>
          <tr class="v-flex">
            <td>
              <div class="t-head">Posted By</div>
              <div class="t-body">
                {{journalTrustEstate.postedBy ? journalTrustEstate.postedBy:"-"}}
              </div>
            </td>
          </tr>
          <tr class="v-flex">
            <td>
              <div class="t-head">Posted Date</div>
              <div class="t-body">{{journalTrustEstate.postedDate ? (journalTrustEstate.postedDate | appDate):"-"}}
              </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="item-content">
        <table>
          <tr class="v-flex">
            <td>
              <!-- <div class="t-head">Status</div>
              <div class="t-body">{{journalTrustEstate.statusDescription ? journalTrustEstate.documentNumber:"-"}}</div> -->
              <view-label label="Status" status="{{ journalTrustEstate.statusValue }}"
                statusValue="{{ journalTrustEstate.statusDescription }}"></view-label>
            </td>
          </tr>
          <tr class="v-flex">
            <td>
              <div class="t-head">Assigned Officer</div>
              <div class="t-body">{{assignedOfficerName? assignedOfficerName : '-'}}</div>
            </td>
          </tr>
        </table>
      </div>
    </div>
  </div>
  <div class="card pb26">
    <div class="d-flex">
      <div class="color1">
        <ion-icon src="assets/icons/finance.svg"></ion-icon>
      </div>
      <div class="color">Customer Information</div>
    </div>
    <div class="border mb26 mt10"></div>
    <div class="d-flex gap25 w100">
      <div class="voucher-detail">
        <view-label label=" Account Number"
          value="{{ journalTrustEstate.customerAccountNumber == 0 ? '-' : journalTrustEstate.customerAccountNumber}}"></view-label>
        <view-label label="Customer Name" value="{{ journalTrustEstate.pentCustomer.customerName }}"></view-label>
      </div>
      <div class="voucher-detail border-right-cus">
        <view-label label="File Type" value="{{ journalTrustEstate.fileTypeDescription }}"></view-label>
        <view-label label="Account Type" value="{{ journalTrustEstate.accountTypeDescription }}"></view-label>
      </div>
      <div class="voucher-detail">
        <view-label label="Date of birth"
          value="{{ journalTrustEstate.pentCustomer.dateOfBirth  | appDate }}"></view-label>
        <view-label label="Gender" value="{{ journalTrustEstate.pentCustomer.genderDescription }}"></view-label>
      </div>
      <div class="voucher-detail">
        <view-label label="Contact No
        " value="{{ journalTrustEstate.pentCustomer.contactNo }}"></view-label>
        <view-label label="Email Id" value="{{ journalTrustEstate.pentCustomer.emailId }}"></view-label>
      </div>
    </div>
  </div>

  <!-- <div class="card">
    <div class="d-flex">
      <div class="color1">
        <ion-icon src="assets/icons/finance.svg"></ion-icon>
      </div>
      <div class="color">Customer Information</div>
    </div>
    <div class="border mb26 mt10"></div>
    <div class="d-flex gap25 w100">
      <div class="voucher-detail">
        <view-label label=" Account Number"
          value="{{journalTrustEstate.customerAccountNumber === 0 ? '-' : journalTrustEstate.customerAccountNumber }}"></view-label>
        <view-label label="Customer Name" value="{{journalTrustEstate.pentCustomer.customerName}}"></view-label>
      </div>
      <div class="voucher-detail border-right-cus">
        <view-label label="File Type" value="{{journalTrustEstate.fileTypeDescription}}"></view-label>
        <view-label label="Account Type" value="{{journalTrustEstate.accountTypeDescription}}"></view-label>
      </div>
      <div class="voucher-detail ">
        <view-label label="Date of birth"
          value="{{journalTrustEstate.pentCustomer.dateOfBirth | appDate}}"></view-label>
        <view-label label="Gender" value="{{journalTrustEstate.pentCustomer.genderDescription}}"></view-label>
      </div>
      <div class="voucher-detail">
        <view-label label="Contact No
        " value="{{journalTrustEstate.pentCustomer.contactNo}}"></view-label>
        <view-label label="Email Id" value="{{journalTrustEstate.pentCustomer.emailId}}"></view-label>
      </div>

    </div>


  </div> -->




  <app-tab-group (tabChange)="onTabChange($event)">
    <app-tab tabTitle="Application">
      <accordion>
        <accordion-item [isOpen]="true">
          <accordion-header>
            <div class="accordion-header-content">
              <div class="accordion-title open-visible">
                <ion-icon src="assets/icons/finance.svg"></ion-icon>
                <div class="">Voucher Information</div>
              </div>
              <div class="accordion-title open-hide">
                <row class="row-w100">
                  <div class="accordion-title">
                    <ion-icon src="assets/icons/finance.svg"></ion-icon>
                    <div class="">Finance Information</div>
                  </div>
                </row>
              </div>
            </div>
          </accordion-header>
          <accordion-body>
            <div class="accordian-content">
              @if(journalTrustEstate.transactionPostingId>0){
              <form #financeInformation="ngForm">
                <row>
                  <div class="col-md-4 border-right">
                    <div class="view-label-container-title mb26">
                      <ion-icon src="assets/icons/accordian/application.svg" class="pr5px"></ion-icon>
                      Account Information
                    </div>
                    @if(editTrust === false){
                    <view-label label="Branch" class="pb10" value="{{branchName}}"></view-label>

                    <view-label class="pb10" label="File Type"
                      value="{{journalTrustEstate.fileTypeDescription}}"></view-label>
                    <view-label class="pb10" label="Account Type"
                      value="{{journalTrustEstate.accountTypeDescription}}"></view-label>
                      <view-label class="pb10" label="Account Number"
                      value="{{ journalTrustEstate.customerAccountNumber }}"></view-label>


                    }
                    @else {
                    <div class="col-md-12 mb20">
                      <view-label label="Branch" value="{{branchName}}"></view-label>

                    </div>
                    <div class="col-md-12">
                      <app-input-control type="select" label="File Type" [(ngModel)]="journalTrustEstate.fileTypeValue"
                        name="fileTypeValue" [items]="initialData.DDLValues.DDLFileType" key="constant"
                        keyName="description" [required]="true" [errorTrue]="errorTrue"
                        (onSelect)="fileData(journalTrustEstate.fileTypeValue);journalTrustEstate.customerAccountNumber=0;journalTrustEstate.accountTypeValue=''"
                        defaultOption="--Select--">
                      </app-input-control>
                    </div>
                    <div class="col-md-12">
                      <app-input-control type="select" label="Account Type"
                        [(ngModel)]="journalTrustEstate.accountTypeValue" name="accountTypeValue"
                        [items]="casAccountType" key="constant" keyName="description" [required]="true"
                        [errorTrue]="errorTrue" [btnClicked]="journalTrustEstate.fileTypeValue===''"
                        (onSelect)="accountNum(journalTrustEstate.accountTypeValue)" defaultOption="--Select--">
                      </app-input-control>
                    </div>
                    <div class="col-md-12">
                      <app-input-control type="select" label=" Account Number"
                        [(ngModel)]="journalTrustEstate.customerAccountNumber" name="customerAccountNumber"
                        [items]="accountNumber" key="ledgerId" keyName="code" (onSelect)="
                          bankCode(
                            journalTrustEstate.customerAccountNumber,
                            true
                          )
                        " defaultOption="--Select--" [required]="true" [errorTrue]="errorTrue"></app-input-control>
                    </div>


                    }

                  </div>
                  <div class="col-md-4 border-right">
                    <div class="view-label-container-title mb26">
                      <ion-icon name="person-outline" class="pr5px"></ion-icon>
                      Configuration Information
                    </div>
                    @if(editTrust === false){

                    <view-label class="pb10" label="Event" value="{{journalTrustEstate.eventName}}"></view-label>
                    <view-label class="pb10" label="Sub Event" value="{{journalTrustEstate.subEventName}}"></view-label>
                    <view-label class="pb10" label="Posting Matrix"
                      value="{{journalTrustEstate.postingMatrix}}"></view-label>
                    <view-label class="pb10" label="Transaction Code"
                      value="{{journalTrustEstate.transactionCode}}"></view-label>
                    }
                    @else {
                    <div class="col-md-12 ">
                      <app-input-control type="select" label="Event" [(ngModel)]="journalTrustEstate.eventId"
                        name="eventId"
                        (onSelect)="getListOfSubEventByEventId(journalTrustEstate.eventId);journalTrustEstate.appEventMappingId=0;journalTrustEstate.subEventId=0;"
                        [items]="eventddl" key="id" keyName="name" defaultOption="--Select--" [required]="true"
                        [errorTrue]="errorTrue" valueType="int"> </app-input-control>
                    </div>

                    <div class="col-md-12">
                      <app-input-control type="select" label="Sub Event" [(ngModel)]="journalTrustEstate.subEventId"
                        name="subEventId"
                        (onSelect)="getEventMappingIdPostingMatrixByEventandSubEventId(journalTrustEstate.subEventId);journalTrustEstate.appEventMappingId=0"
                        key="id" keyName="name" [items]="subeventddl" defaultOption="--Select--" [required]="true"
                        [errorTrue]="errorTrue"> </app-input-control>

                    </div>
                    <div class="col-md-12">
                      <app-input-control type="select" label="Posting Matrix"
                        [(ngModel)]="journalTrustEstate.appEventMappingId" name="appEventMappingId"
                        [items]="postingMatrixddl" key="id" keyName="description" (onSelect)="transactionData($event);"
                        [required]="true" defaultOption="--Select--"> </app-input-control>

                    </div>
                    <div class="col-md-12">
                      <app-input-control type="text" label="Transaction Code"
                        [(ngModel)]="journalTrustEstate.transactionCode" name="transactionCode" [btnClicked]="true">
                      </app-input-control>

                    </div>
                    }


                  </div>


                  <div class="col-md-4 border-right">

                    <div class="view-label-container-title mb26">
                      <ion-icon src="assets/icons/accordian/customer-service.svg" class="pr5px"></ion-icon>
                      Document Information
                    </div>
                    @if(editTrust === false){

                    <view-label class="pb10" label="Document  Date"
                      value="{{journalTrustEstate.documentDate | appDate}}"></view-label>
                    <view-label class="pb10" label="Primary Value ({{currencyVal}})"
                      value="{{journalTrustEstate.inputValue}}"></view-label>
                    } @else {
                    <!-- <div class="col-md-12">
                        <app-input-control type="select" label="Branch" [(ngModel)]="journalTrustEstate.branchId"
                          name="branchId" [items]="DDLBranch" key="branchId" keyName="branchDescription" [required]="true"
                          [errorTrue]="errorTrue"> </app-input-control>
                      </div> -->

                    <div class="col-md-12">
                      <app-input-control type="date" label="Document Date" [(ngModel)]="journalTrustEstate.documentDate"
                        name="documentDate" [minDate]="journalTrustEstate.documentDate" [required]="true"
                        [errorTrue]="errorTrue"> </app-input-control>
                    </div>
                    <div class="col-md-12">
                      <app-input-control type="text" label="Primary Value ({{currencyVal}})"
                        (onChange)="calculatePostingValue()" [(ngModel)]="journalTrustEstate.inputValue"
                        name="inputValue" [required]="true" [errorTrue]="errorTrue" [min]="1"> </app-input-control>
                    </div>
                    <div class="col-md-12">
                      <app-input-control type="number" label="Auto Posting Value ({{currencyVal}})" [min]="1"
                        [(ngModel)]="journalTrustEstate.postingValue" name="postingValue" [required]="true"
                        [errorTrue]="errorTrue" [btnClicked]="true"> </app-input-control>
                    </div>
                    }
                    @if(editTrust===false){

                    <view-label class="pb10 " label="Auto Posting Value ({{currencyVal}})"
                      value="{{journalTrustEstate.postingValue}}"></view-label>
                    }
                    @else{
                    <!-- <view-label class="pb10 pl" label="Primary Value"
                      value="{{journalTrustEstate.inputValue}}"></view-label> -->
                    <!-- <view-label class="pb10 pl" label="Auto Posting Value"
                      value="{{journalTrustEstate.postingValue}}"></view-label> -->
                    }
                    @if(editTrust === false){
                    <div class=" textarea-cus">
                   
                      <app-input-control type="textarea" className="notes" [errorTrue]="errorTrue" [maxLength]="250"
                        [required]="true" [(ngModel)]="journalTrustEstate.narrative" name="narrative"
                        [btnClicked]="true" label="Narrative"></app-input-control>
                    </div>

                    }
                    @else{
                    <div class=" col-md-12 textarea-cus">
                     
                      <app-input-control type="textarea" className="notes" [errorTrue]="errorTrue" [maxLength]="250"
                        [required]="true" [(ngModel)]="journalTrustEstate.narrative" name="narrative"
                        [btnClicked]="true" label="Narrative"></app-input-control>
                    </div>

                    }
                  </div>
                  <!-- <div class="col-md-3 mb26">
                    <div class="view-label-container-title mb26">
                      <ion-icon src="assets/icons/accordian/customer-service.svg" class="pr5px"></ion-icon>
                      Payment Information
                    </div>
                    @if(editTrust === false){
                    <view-label class="pb10" label="Payment Mode"
                      value="{{ journalTrustEstate.paymentModeDescription }}"></view-label>
                    @if(journalTrustEstate.paymentModeDescription !== 'Cash' ){
                    <view-label class="pb10" label="Bank Code"
                      value="{{ journalTrustEstate.bankCode }}"></view-label>
                    <view-label class="pb10" label="Bank Account Number"
                      value="{{ journalTrustEstate.bankAccountNumber }}"></view-label>
                    <view-label class="pb10" label="Transaction Date"
                      value="{{ journalTrustEstate.chequeTransactionDate | appDate}}"></view-label>
                    <view-label class="pb10" label="Transaction Number"
                      value="{{ journalTrustEstate.chequeTransactionNumber }}"></view-label>
                    }
                    } @else {
                    <div class="col-md-12">
                      <app-input-control type="select" label="Payment Mode"
                        [(ngModel)]="journalTrustEstate.paymentModeValue" name="paymentModeValue" [required]="true"
                        [errorTrue]="errorTrue" [items]="initialData.DDLValues.DDLPayment" key="constant"
                        keyName="description" defaultOption="--Select--" (onSelect)="getBankDetails()">
                      </app-input-control>
                    </div>
                   
                    @if(this.journalTrustEstate.paymentModeValue==='CHEQU'){
                    <div class="col-md-12">
                      <app-input-control type="select" label="Bank Code" [(ngModel)]="journalTrustEstate.bankId"
                        (onSelect)="getAccountNo(journalTrustEstate.bankId)" name="bankId" [required]="true"
                        [errorTrue]="errorTrue" defaultOption="--Select--" [items]="checkcodeDDl" key="bankId"
                        keyName="bankCode" [showExtraSpace]="true">
                       
                        <add-bank [referenceId]="journalTrustEstate.referenceId" [branchName]="branchName"
                          (onComplete)="this.bankCode(this.journalTrustEstate.customerAccountNumber)"
                          (onClose)="getDDL()"></add-bank>
                      </app-input-control>
                    </div>
                    <div class="col-md-12">
                      <app-input-control type="text" label="Bank Account Number"
                        [(ngModel)]="journalTrustEstate.bankAccountNumber" name="bankAccountNumber" [required]="true"
                        [errorTrue]="errorTrue" [btnClicked]="true">
                      </app-input-control>
                    </div>
                    <div class="col-md-12">
                      <app-input-control type="date" label="Cheque Date"
                        [(ngModel)]="journalTrustEstate.chequeTransactionDate" name="chequeTransactionDate"
                        [minDate]="journalTrustEstate.enteredDate" [required]="true" [errorTrue]="errorTrue">
                      </app-input-control>
                    </div>
                    <div class="col-md-12">
                      <app-input-control type="number" label="Cheque Number"
                        [(ngModel)]="journalTrustEstate.chequeTransactionNumber" name="chequeTransactionNumber "
                        [required]="true" [errorTrue]="errorTrue" [btnClicked]="journalTrustEstate.bankId === 0"
                        [maxLength]="25">
                      </app-input-control>
                    </div>
                    } @if (this.journalTrustEstate.paymentModeValue==='BKTRN') {
                    <div class="col-md-12">
                      <app-input-control type="select" label="Bank Code" [(ngModel)]="journalTrustEstate.bankId"
                        (onSelect)="getAccountNo(journalTrustEstate.bankId)" name="bankId" [required]="true"
                        [errorTrue]="errorTrue" defaultOption="--Select--" [items]="checkcodeDDl" key="bankId"
                        keyName="bankCode" [showExtraSpace]="true">
                       
                        <add-bank [referenceId]="journalTrustEstate.referenceId" [branchName]="branchName"
                          (onComplete)="this.bankCode(this.journalTrustEstate.customerAccountNumber)"
                          (onClose)="getDDL()"></add-bank>
                      </app-input-control>
                    </div>
                    <div class="col-md-12">
                      <app-input-control type="text" label="Bank Account Number"
                        [(ngModel)]="journalTrustEstate.bankAccountNumber" name="bankAccountNumber" [required]="true"
                        [errorTrue]="errorTrue" [btnClicked]="true">
                      </app-input-control>
                    </div>
                    <div class="col-md-12">
                      <app-input-control type="date" label="Transaction Date"
                        [(ngModel)]="journalTrustEstate.chequeTransactionDate" name="chequeTransactionDate "
                        [required]="true" [errorTrue]="errorTrue" [btnClicked]="journalTrustEstate.bankId === 0"
                        [minDate]="journalTrustEstate.enteredDate">
                      </app-input-control>
                    </div>
                    <div class="col-md-12">
                      <app-input-control type="number" label="Transaction Number"
                        [(ngModel)]="journalTrustEstate.chequeTransactionNumber" name="chequeTransactionNumber"
                        [required]="true" [errorTrue]="errorTrue" [btnClicked]="journalTrustEstate.bankId === 0"
                        [maxLength]="25">
                      </app-input-control>
                    </div>
                    } }
                  </div> -->

                </row> 
              </form>
              }
              @else{
              <form #financeInformation="ngForm">
                <row>


                  <div class="col-md-4 border-right">
                    <div class="view-label-container-title mb26">
                      <ion-icon src="assets/icons/accordian/application.svg" class="pr5px"></ion-icon>
                      Account Information
                    </div>

                    <div class="col-md-12 mb20">
                      <view-label label="Branch" value="{{branchName}}"></view-label>

                    </div>
                    <div class="col-md-12">
                      <app-input-control type="select" label="File Type" [(ngModel)]="journalTrustEstate.fileTypeValue"
                        name="fileTypeValue" [items]="initialData.DDLValues.DDLFileType" key="constant"
                        keyName="description" [required]="true" [errorTrue]="errorTrue"
                        (onSelect)="fileData(journalTrustEstate.fileTypeValue);journalTrustEstate.customerAccountNumber=0;journalTrustEstate.accountTypeValue=''"
                        defaultOption="--Select--">
                      </app-input-control>
                    </div>
                    <div class="col-md-12">
                      <app-input-control type="select" label="Account Type"
                        [(ngModel)]="journalTrustEstate.accountTypeValue" name="accountTypeValue"
                        [items]="casAccountType" key="constant" keyName="description" [required]="true"
                        [errorTrue]="errorTrue" [btnClicked]="journalTrustEstate.fileTypeValue===''"
                        (onSelect)="accountNum(journalTrustEstate.accountTypeValue);journalTrustEstate.customerAccountNumber=0"
                        defaultOption="--Select--">
                      </app-input-control>
                    </div>
                    <div class="col-md-12">
                      <app-input-control type="select" label=" Account Number"
                        [(ngModel)]="journalTrustEstate.customerAccountNumber" name="customerAccountNumber"
                        [items]="accountNumber" key="ledgerId" keyName="code" (onSelect)="
                          bankCode(journalTrustEstate.customerAccountNumber, true)
                        " defaultOption="--Select--"></app-input-control>
                    </div>
                  </div>
                  <div class="col-md-4 border-right">
                    <div class="view-label-container-title mb26">
                      <ion-icon name="person-outline" class="pr5px"></ion-icon>
                      Configuration Information
                    </div>

                    <div class="col-md-12 ">
                      <app-input-control type="select" label="Event" [(ngModel)]="journalTrustEstate.eventId"
                        name="eventId"
                        (onSelect)="getListOfSubEventByEventId(journalTrustEstate.eventId);journalTrustEstate.subEventId=0;journalTrustEstate.appEventMappingId=0"
                        [items]="eventddl" key="id" keyName="name" defaultOption="--Select--" [required]="true"
                        [errorTrue]="errorTrue" valueType="int"> </app-input-control>
                    </div>
                    <div class="col-md-12">
                      <app-input-control type="select" label="Sub Event" [(ngModel)]="journalTrustEstate.subEventId"
                        name="subEventId"
                        (onSelect)="getEventMappingIdPostingMatrixByEventandSubEventId(journalTrustEstate.subEventId);journalTrustEstate.appEventMappingId=0"
                        key="id" keyName="name" [items]="subeventddl" defaultOption="--Select--" [required]="true"
                        [errorTrue]="errorTrue" valueType="int"> </app-input-control>

                    </div>
                    <div class="col-md-12">
                      <app-input-control type="select" label="Posting Matrix" (onSelect)="transactionData($event)"
                        [(ngModel)]="journalTrustEstate.appEventMappingId" name="appEventMappingId"
                        [items]="postingMatrixddl" key="id" keyName="description" valueType="int"
                        defaultOption="--Select--"> </app-input-control>

                    </div>

                    <div class="col-md-12">
                      <app-input-control type="text" label="Transaction Code"
                        [(ngModel)]="journalTrustEstate.transactionCode" name="transactionCode" [btnClicked]="true">
                      </app-input-control>


                    </div>

                  </div>
                  <div class="col-md-4 border-right">

                    <div class="view-label-container-title mb26">
                      <ion-icon src="assets/icons/accordian/customer-service.svg" class="pr5px"></ion-icon>
                      Document Information
                    </div>

                    <div class="col-md-12">
                      <app-input-control type="date" label="Document Date" [(ngModel)]="journalTrustEstate.documentDate"
                        name="documentDate" [minDate]="journalTrustEstate.documentDate" [required]="true"
                        [errorTrue]="errorTrue"> </app-input-control>
                    </div>
                    <div class="col-md-12">
                      <app-input-control type="text" label="Primary Value ({{currencyVal}})"
                        (onChange)="calculatePostingValue()" [(ngModel)]="journalTrustEstate.inputValue"
                        name="inputValue" [required]="true" [errorTrue]="errorTrue" valueType="int">
                      </app-input-control>
                    </div>
                    <div class="col-md-12">
                      <app-input-control type="number" label="Auto Posting Value ({{currencyVal}})" [min]="1"
                        [(ngModel)]="journalTrustEstate.postingValue" name="postingValue" [required]="true"
                        [errorTrue]="errorTrue" [btnClicked]="true"> </app-input-control>
                    </div>
                    <div >
                    
                      <app-input-control type="textarea" className="notes" [errorTrue]="errorTrue" [maxLength]="250"
                        [required]="true" [(ngModel)]="journalTrustEstate.narrative"
                        name="narrative" label="Narrative"></app-input-control>
                    </div>
                  </div>

                  <!-- <div class="col-md-3 mb26 ">
                    <div class=" pr5px mb44">
                      <div class="col-md-12 textarea-cus">
                        <div class="view-label-container-title mb26">
                          <ion-icon src="assets/icons/accordian/customer-service.svg" class="pr5px"></ion-icon>
                          Payment Information
                        </div>
                        <div class="col-md-12">
                          <app-input-control type="select" label="Payment Mode"
                            [(ngModel)]="journalTrustEstate.paymentModeValue" name="paymentModeValue" [required]="true"
                            [errorTrue]="errorTrue" [items]="initialData.DDLValues.DDLPayment" key="constant"
                            keyName="description" defaultOption="--Select--"
                            (onSelect)="(journalTrustEstate.referenceId)">
                          </app-input-control>
                        </div>
                        @if(this.journalTrustEstate.paymentModeValue==='CHEQU'){
                        <div class="col-md-12">
                          <app-input-control type="select" label="Bank Code" [(ngModel)]="journalTrustEstate.bankId"
                            (onSelect)="getAccountNo(journalTrustEstate.bankId)" name="bankId" [required]="true"
                            [errorTrue]="errorTrue" defaultOption="--Select--" [items]="checkcodeDDl" key="bankId"
                            keyName="bankCode" [showExtraSpace]="true">
                            <add-bank [referenceId]="journalTrustEstate.referenceId" [branchName]="branchName"
                              (onComplete)="this.bankCode(this.journalTrustEstate.customerAccountNumber)"
                              (onClose)="getDDL()"></add-bank>
                          </app-input-control>
                        </div>
                        <div class="col-md-12">
                          <app-input-control type="text" label="Bank Account Number"
                            [(ngModel)]="journalTrustEstate.bankAccountNumber" name="bankAccountNumber"
                            [required]="true" [errorTrue]="errorTrue" [btnClicked]="true">
                          </app-input-control>
                        </div>
                        <div class="col-md-12">
                          <app-input-control type="date" label="Cheque Date"
                            [(ngModel)]="journalTrustEstate.chequeTransactionDate" name="chequeTransactionDate"
                            [required]="true" [errorTrue]="errorTrue" [btnClicked]="journalTrustEstate.bankId===0"
                            [minLength]="8" [maxlength]="15" [minDate]="journalTrustEstate.enteredDate">
                          </app-input-control>
                        </div>
                        <div class="col-md-12">
                          <app-input-control type="text" label="Cheque Number"
                            [(ngModel)]="journalTrustEstate.chequeTransactionNumber" name="chequeTransactionNumber"
                            [required]="true" [errorTrue]="errorTrue" [btnClicked]="journalTrustEstate.bankId===0"
                            [minlength]="8" [maxlength]="25">
                          </app-input-control>
                        </div>
                        }
                        @if (this.journalTrustEstate.paymentModeValue==='BKTRN') {
                        <div class="col-md-12">

                          <app-input-control type="select" label="Bank Code" [(ngModel)]="journalTrustEstate.bankId"
                            (onSelect)="getAccountNo(journalTrustEstate.bankId)" name="bankId" [required]="true"
                            [errorTrue]="errorTrue" defaultOption="--Select--" [items]="checkcodeDDl" key="bankId"
                            keyName="bankCode" [showExtraSpace]="true">
                            <add-bank [referenceId]="journalTrustEstate.referenceId" [branchName]="branchName"
                              (onComplete)="this.bankCode(this.journalTrustEstate.customerAccountNumber)"
                              (onClose)="getDDL()"></add-bank>
                          </app-input-control>
                        </div>
                        <div class="col-md-12">
                          <app-input-control type="text" label="Bank Account Number"
                            [(ngModel)]="journalTrustEstate.bankAccountNumber" name="bankAccountNumber"
                            [required]="true" [errorTrue]="errorTrue" [btnClicked]="true">
                          </app-input-control>
                        </div>
                        <div class="col-md-12">
                          <app-input-control type="date" label="Transaction Date"
                            [(ngModel)]="journalTrustEstate.chequeTransactionDate" name="chequeTransactionDate"
                            [required]="true" [errorTrue]="errorTrue" [btnClicked]="journalTrustEstate.bankId===0"
                            [minDate]="journalTrustEstate.enteredDate">
                          </app-input-control>
                        </div>
                        <div class="col-md-12">
                          <app-input-control type="text" label="Transaction Number"
                            [(ngModel)]="journalTrustEstate.chequeTransactionNumber" name="chequeTransactionDate"
                            [required]="true" [errorTrue]="errorTrue" [btnClicked]="journalTrustEstate.bankId===0"
                            [maxLength]="25">
                          </app-input-control>
                        </div>
                        }

                      </div>
                    </div>
                  </div>  -->
                </row>
              </form>
              }


              <div class="d-flex end gap-10">
                @if(this.journalTrustEstate.transactionPostingId===0 && editAccess){
                <app-icon-button name="save" toolTip="Save" (click)="saveTransactionPosting()"></app-icon-button>
                <app-icon-button name="clear" toolTip="Clear" (click)="Clear()"></app-icon-button>
                } @else {
                @if(this.editTrust===false && editAccess){
                @if( journalTrustEstate.statusValue != 'APPRD' ){
                <app-icon-button name="edit" toolTip="Edit" (click)="editTransaction()"></app-icon-button>
                }
                } @else if( journalTrustEstate.transactionPostingId!==0 && editAccess) {

                <div class="col-md-3 d-flex gap-10 end">
                  <app-icon-button name="save" (click)="updateTransactionPosting()" toolTip="Update"></app-icon-button>
                  <app-icon-button name="refresh" toolTip="Refresh" (click)="
                        openTransactionPosting(
                          journalTrustEstate.transactionPostingId,
                          'refresh'
                        )
                      "></app-icon-button>
                </div>
                } }

              </div>
            </div>
          </accordion-body>
        </accordion-item>

        <accordion-item [isOpen]="true">
          <accordion-header>
            <div class="accordion-header-content">
              <div class="accordion-title open-visible">
                <ion-icon src="assets/icons/accordian/application.svg"></ion-icon>
                <div class="accordion-title-content">
                  <div>Transaction Preview</div>
                </div>
              </div>
              <div class="accordion-title open-hide">
                <row class="row-w100">
                  <div class="accordion-title">
                    <ion-icon src="assets/icons/accordian/application.svg"></ion-icon>
                    <div class="accordion-title-content">
                      <div>Transaction Preview</div>
                    </div>
                  </div>
                </row>
              </div>
            </div>
          </accordion-header>

          <accordion-body>

            <div class="outer-content-wrapper">
              <div class="content-wrapper">
                <div class=" justify-content-end gap1">
                  <div class="d-flex trans gap">
                    <div class="gap1">Total Debit ({{currencyVal}})</div>
                    <div class="color"> {{journalTrustEstate.totalDebit | appCurrency}}</div>
                  </div>
                  <div class="d-flex trans gap mr40">
                    <div class="gap">Total Credit ({{currencyVal}})</div>
                    <div class="color">{{journalTrustEstate.totalCredit | appCurrency}}</div>
                  </div>
                </div>

                <div class="v-flex h100" appAccess="FUDTN">
                  <div class="relat scroller">
                    <app-table class="sub-table" [pagination]="pagination" [columns]="columns"
                      [columnsName]="columnsName" [dataSource]="tableData" [hasHeader]="false" [showPaginator]="false"
                      [hideSelectAll]="true">
                      <ng-template cellHeaderDef="groupName" let-element>
                        <app-credit-note-detail-preview>Group Name</app-credit-note-detail-preview>
                      </ng-template>
                      <ng-template cellHeaderDef="ledgerName" let-element>
                        <div >Ledger Name</div>
                      </ng-template>
                      <ng-template cellHeaderDef="postingType" let-element>
                        <div>Posting Nature</div>
                      </ng-template>
                      <ng-template cellHeaderDef="postingValue" let-element>
                        <div class="amount-align">Posting Value ({{currencyVal}}) </div>
                      </ng-template>
                      <ng-template cellHeaderDef="postingType2" let-element>
                        <div>Posting Type</div>
                      </ng-template>
                      <ng-template cellHeaderDef="postingBooks" let-element>
                        <div>Posting Books</div>
                      </ng-template>
                      <ng-template cellDef="groupName" let-element>
                        <div>{{ element.groupName }}</div>
                      </ng-template>
                      <ng-template cellDef="ledgerName" let-element>
                        <div>{{ element.ledgerName }}</div>
                      </ng-template>

                      <ng-template cellDef="postingValue" let-element>
                        <div class="amount-align">
                          <div >
                            {{ element.postingValue }}
                          </div>
                        </div>
                      </ng-template>

                      <ng-template cellDef="postingType2" let-element>
                        @if(element.isPrimaryPosting==='N'){
                        <div>Auto Posting</div>
                        } @else {
                        <div>Primary Posting</div>

                        }
                      </ng-template>
                      <ng-template cellDef="postingBooks" let-element>
                        @if(element.isCorporateGl==='N'){
                        <div class="">Trust&Estate</div>
                        } @else {
                        <div class="">Corporate</div>

                        }
                      </ng-template>
                      <ng-template cellDef="postingType" let-element>
                        <div class="">{{ element.postingNatureDescription }}</div>
                      </ng-template>
                    </app-table>
                  </div>
                </div>
              </div>
            </div>
          </accordion-body>
        </accordion-item>
      </accordion>
    </app-tab>

    @if(journalTrustEstate.transactionPostingId !==0 ){
    <app-tab tabTitle="History">
      <accordion>
        <accordion-item [isOpen]="true">
          <accordion-header>
            <div class="accordion-header-content">
              <div class="accordion-title">
                <ion-icon name="notifications-outline"></ion-icon>
                <div class="accordion-title-content">
                  <div>Notes</div>
                  <div class="accordian-title-count">{{journalTrustEstate.plstentTransactionPostingNotes.length}}</div>
                </div>
              </div>
            </div>
          </accordion-header>
          <accordion-body>
            <div class="outer-content-wrapper">
              <div class="content-wrapper">
                <div class="p16px pb26 wrap-content">
                  <!-- @if(this.journalTrustEstate.transactionPostingId===0){ -->
                  <div class="justify-content-end d-flex">
                    <!-- @if( editAccess){ -->
                    @if(editAccess && (journalTrustEstate.statusValue!=='CNCLD' &&
                    journalTrustEstate.statusValue!=='APPRD' && journalTrustEstate.statusValue!=='APVIP') ){
                    <app-icon-button name="add" toolTip="Create" (click)="createNotes()"></app-icon-button>
                    }
                    <!-- } -->
                  </div>
                  <!-- } -->

                  @for (item of notesList; track $index) {
                  <div class="border-bottom  notes-list">
                    <div class="mx10">{{item.notes}}</div>
                    <div class="d-flex justify-content-end notes-context">
                      <div style="padding-right:5px ;">
                        {{item.enteredByFullName}}</div>
                      <div class=" notes-border-left">
                        {{item.enteredDate | appDate : appSetting.environment.dateViewFormatWithTime}}
                      </div>
                      <div style="padding-right:5px ;"></div>
                      <!-- <div class=" notes-border-left status-{{item.actionStatusValue}}">
                                              {{item.actionStatusDescription}}
                                          </div> -->
                      <div style="padding-right:5px ;"></div>
                      <div class=" notes-border-left status-{{item.statusValue}}">
                        {{item.statusDescription}}
                      </div>
                      <div class="card-1-header-label px-2 ">

                      </div>
                    </div>
                  </div>
                  }
                </div>
              </div>
            </div>
          </accordion-body>
        </accordion-item>
        <accordion-item [isOpen]="true">
          <accordion-header>
            <div class="accordion-header-content">
              <div class="accordion-title">
                <ion-icon src="assets/icons/accordian/customer-service.svg"></ion-icon>
                <div class="accordion-title-content">
                  <div>Assigned Officer</div>
                  <div class="accordian-title-count">{{assignOfficerData.length}}
                  </div>
                </div>
              </div>
            </div>
          </accordion-header>
          <accordion-body>

            <div class="outer-content-wrapper">
              <div class="content-wrapper">

                <app-table [columns]="assignOfficerColumns" [columnsName]="assignOfficerColumnsName"
                  [hasPagination]="true" [dataSource]=" assignOfficerData" [hideSelectAll]="true">
                  <!-- <ng-template cellDef="statusDescription" let-element>
                    <div class=" status-{{element.statusValue}}">{{element.statusDescription}}</div>
                </ng-template> -->




                  <ng-template cellHeaderDef="assignedOfficerFullName" let-element>
                    <div class="header-cell-title ">Assigned Officer</div>

                  </ng-template>
                  <ng-template cellDef="assignedOfficerFullName" let-element>
                    <div class="header-cell-title ">{{element.assignedOfficerFullName}}</div>

                  </ng-template>
                  <ng-template cellHeaderDef="assignedByFullName" let-element>
                    <div class="header-cell-title ">Assigned By</div>
                  </ng-template>
                  <ng-template cellDef="assignedByFullName" let-element>
                    <div class="header-cell-title ">{{element.assignedByFullName}}</div>

                  </ng-template>
                  <ng-template cellDef="assignedDate" let-element>
                    <div>

                      {{ element.assignedDate | appDate : appSetting.environment.dateViewFormatWithTime
                      }}
                    </div>
                  </ng-template>
                  <ng-template cellHeaderDef="statusDescription" let-element>
                    <div class=" ">Status</div>
                  </ng-template>
                  <ng-template cellDef="statusDescription" let-element>
                    <div class="  status-{{element.statusValue}}">
                      {{element.statusDescription}}
                    </div>
                  </ng-template>
                  <ng-template #slotRight>
                    <!-- @if(paymentTrustEstate.assignedOfficerFlag === true){ -->
                     <div class="d-flex align-items-center">
                      @if(this.journalTrustEstate.reAssignFlag === true &&
                      (journalTrustEstate.statusValue==='PNDSB' || journalTrustEstate.statusValue==='PDNVR'||
                      journalTrustEstate.statusValue==='PNDAP')){
                      <form #p="ngForm" class="col-md-10 w250">
                        <app-input-control type="select" [(ngModel)]="assignedOfficer.assingedOfficier"
                          name="assingedOfficier" [items]="assignedOfficerddl" key="constant" [errorTrue]="errorTrue1"
                          [required]="true" keyName="description"></app-input-control>
                      </form>
                      <div class="col-md-2">
                        <div class="col-md-2">
                          <app-icon-button name="reassign" toolTip="Reassign" (click)="
                              reAssignTransactionPostingAssignedOfficer(
                                assignedOfficer.assingedOfficier
                              )
                            "></app-icon-button>
                        </div>
                      </div>
                      }
                      @if(this.journalTrustEstate.selfAssignFlag === true &&
                      (journalTrustEstate.statusValue==='PNDSB' || journalTrustEstate.statusValue==='PDNVR'||
                      journalTrustEstate.statusValue==='PNDAP')){

                      <div class="col-md-2">
                        <app-icon-button name="self-assign" (click)="
                            selfAssignTransactionPostingAssignedHistory()
                          " toolTip="Self Assign"></app-icon-button>
                      </div>
                      }
                    </div>
                    <!-- } -->
                  </ng-template>
                </app-table>
              </div>
            </div>

          </accordion-body>
        </accordion-item>
      </accordion>
      <div class="bg-white-padd">

        <app-tab-sub-group>
          <app-sub-tab tabTitle="Status History">
            <div class="status-padding">
              <!-- @if (journalTrustEstate.plstentTransactionPostingStatusHistory.length > 0) { -->
              <div class="status-history">
                <ul>
                  @for (x of journalTrustEstate.plstentTransactionPostingStatusHistory; track $index) {
                  <li>


                    <div class="status-history-title status-{{x.statusValue}}">{{x.statusDescription}}</div>

                    <div class="status-history-subtitle">{{x.changedByFullName}} | {{x.changedDate |appDate}} |
                      {{x.changedDate
                      |appDate: 'hh:mm a'}}</div>
                  </li>
                  }
                </ul>
              </div>
              <!-- } -->
            </div>
          </app-sub-tab>
          <app-sub-tab tabTitle="Communication History">
            <div class="outer-content-wrapper">
              <div class="content-wrapper">

                <app-table [columns]="emailColumns" [columnsName]="emailColumnsName" [hasPagination]="true"
                  [dataSource]="emailHistoryTableData" [hideSelectAll]="true">
                  <ng-template cellHeaderDef="toEmailId">
                    <div class=" ">To</div>
                  </ng-template>
                  <ng-template cellDef="toEmailId" let-element>
                    {{element.ientCommunicationTracking?.toEmailId}}
                  </ng-template>
                  <ng-template cellDef="sentDate" let-element>

                    <div class="">
                      {{ element.sendDate | appDate : appSetting.environment.dateViewFormatWithTime}}
                    </div>

                  </ng-template>
                  
                 
                  <ng-template cellDef="sentStatusDescription" let-element>
                    <!-- <div class="status-{{element.ientCommunicationTracking?.sentStatusValue}}">
                    {{element.statusDescription}}
                  </div> -->
                    <div class=" status-{{element.statusValue}}">
                      {{element.statusDescription}}
                    </div>
                  </ng-template>

                  <ng-template cellDef="action" let-element>
                    <!-- <app-icon-button name="add" toolTip="Create" ></app-icon-button> -->
                    <app-icon-button name="open" toolTip="Open" (click)="viewEmailDetail(element)"></app-icon-button>
                  </ng-template>
                </app-table>
              </div>
            </div>
          </app-sub-tab>
        </app-tab-sub-group>
      </div>

    </app-tab>
    @if( journalTrustEstate.statusValue === 'APPRD' ){

      <app-tab tabTitle="Print">
        <div class="v-flex h100">
          <div class="bg-white-padd p16px h300" >
            <div class="outer-content-wrapper h100">
              <div class=" content-wrapper overflow-none m-8px">
                <!-- <row> -->
                  <!-- <div class="wrap-content col-md-4">
                    <app-input-control type="textarea" [maxLength]="250" className="notes-2" name="pdfOtherComments"
                    [(ngModel)]="paymentTrustEstate" 
                    label="COMMENTS OR SPECIAL INSTRUCTIONS"></app-input-control>
                    <div class="end">
                      <app-icon-button name="save" toolTip="Update" class=""></app-icon-button>
                    </div>
                  </div> -->
  
                  <div class="wrap-content col-md-12 h100">
                    <div class="pdf-viewer">
                      <object type="application/pdf" [data]="fileUrl | appSafe: 'resourceUrl'"></object>
                    </div>
                  </div>
                <!-- </row> -->
              </div>
            </div>
          </div>
        </div>
      </app-tab> 
    }
    @if(journalTrustEstate.lstentTransactionPostingErrorMessage?.length > 0) {
    <app-tab tabTitle="Error Message">
      <accordion>

        <accordion-item [isOpen]="true">

          <accordion-body>

            <div class="outer-content-wrapper">
              <div class="content-wrapper">

                <app-table [columns]="errormsgColumns" [columnsName]="errormsgColumnsName" [dataSource]=" errormsgData"
                  [hideSelectAll]="true" [showPaginator]="false">
                  <ng-template cellHeaderDef="assignedOfficerFullName" let-element>
                    <div class="center">
                      S No
                    </div>
                  </ng-template>
                  <ng-template cellHeaderDef="assignedDate" let-element>
                    <div class="center">
                      Error Message Description
                    </div>
                  </ng-template>
                  <ng-template cellHeaderDef="assignedByFullName" let-element>
                    <div class="center">
                      Inserted By
                    </div>
                  </ng-template>
                  <ng-template cellHeaderDef="statusDescription" let-element>
                    <div class="center">
                      Inserted Date
                    </div>
                  </ng-template>

                </app-table>
              </div>
            </div>

          </accordion-body>
        </accordion-item>
      </accordion>


    </app-tab>
    }
    }
  </app-tab-group>


  <ng-template #notesDialog>
    <div class="dialog-container">
      <div class="dialog-header">
        <div class="dialog-title"><ion-icon class="fos-20" src="assets/icons/human-icon.svg"></ion-icon>Journal Trust
          And Estate
          Application >
          Detail >
          Add Notes
        </div>
        <div class="slot-right">
          <div class="btn-group">
            <app-icon-button name="save" toolTip="Save" (click)="saveTransactionPostingNotes(false)"></app-icon-button>
            <app-icon-button name="clear" toolTip="Clear" (click)="clearNotes()"></app-icon-button>
            <app-icon-button name="close" toolTip="Close" (click)="dialog.closeDialog()"></app-icon-button>
          </div>
        </div>
      </div>
      <div class="dialog-content">
        @if(data.showErrorMessage){
        <div class="error-panel">
          <app-error-message></app-error-message>
        </div>
        }
        <div class="dialog-content-inner h100">
          <form #notesForm="ngForm">
            <row>
              <div class="col-md-4 mb26"> <app-input-control type="select" label="Status"
                  [(ngModel)]="journalTrustEstateNotes.statusValue" name="statusValue" [items]="statusddl"
                  key="constant" keyName="description"></app-input-control></div>
              <!-- <div class="col-md-4 mb26"> <app-input-control type="select" label="Action Status"
                                    [required]="true"></app-input-control>
                              </div>
                              <div class="col-md-4 mb26"> <app-input-control type="select" label="Application Stage"

                                      [required]="true"></app-input-control></div> -->
              <div class="col-md-12 mb26">
                <app-input-control type="textarea" className="notes" label="Notes"
                  [(ngModel)]="journalTrustEstateNotes.notes" name="notes" [maxLength]="500"></app-input-control>
              </div>
            </row>
          </form>
        </div>
      </div>
    </div>
  </ng-template>
</div>



<ng-template #bankDialog>
  <div class="dialog-container">
    @if(this.viewBank){
    <div class="dialog-header">
      <div class="dialog-title"> <ion-icon class="dialog-header-icon"
          src="assets/icons/accordian/customer-service.svg"></ion-icon>
        Customer <ion-icon class="arrow-icon" src="assets/icons/arrow.svg"></ion-icon>Details<ion-icon
          class="arrow-icon" src="assets/icons/arrow.svg"></ion-icon>
        View
        Bank
      </div>
      <div class="slot-right">
        <div class="btn-group">
          <app-icon-button name="edit" toolTip="Edit" (click)="editBankDetails()"
            appButtonAccess="CrmCustAppEditBtn"></app-icon-button>
          <app-icon-button name="close" toolTip="Close" (click)="dialog.closeDialog()"
            appButtonAccess="CrmCustAppCancelBtn"></app-icon-button>
        </div>
      </div>
    </div>

    <div class="dialog-content">
      <div class="dialog-content-inner h100">
        <scroll>
          <div class="p10">
            <row>
              <div class="col-md-4">
                <div class="box h100">
                  <div class="box-header">
                    Bank Information
                  </div>
                  <div class="box-pad">
                    <row>
                      <div class="col-md-12"><view-label label="Bank Name" class="mb26"
                          value="{{customerBank.ientBank.bankName}}"></view-label></div>
                      <div class="col-md-12"><view-label label="Bank Code" class="mb26"
                          value="{{journalTrustEstate.bankCode}}"></view-label></div>
                      <div class="col-md-12"><view-label label="Branch " class="mb26"
                          value="{{customerBank.ientBank.branchTypeDescription}}"></view-label>
                      </div>

                      <div class="col-md-12"><view-label label="Swift Code" class="mb26"
                          value="{{customerBank.ientBank.swiftCode}}"></view-label></div>
                      <!-- <div class="col-md-12"><view-label label="IFSC Code" class="mb26"
                          value="{{customerBank.ientBank.ifscCode}}"></view-label></div> -->
                      @if(this.customerBank.ientBank.branchTypeValue === 'BRNOF'){
                      <div class="col-md-12"><view-label label="Head Office Bank"
                          value="{{customerBank.headOfficeBank}}" class="mb26"></view-label>
                      </div>
                      }

                    </row>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="box h100">
                  <div class="box-header ">
                    Additional Information
                  </div>
                  <div class="box-pad">
                    <row>
                      <div class="col-md-12"><view-label label="Account No" class="mb26"
                          value="{{customerBank.accountNo}}"></view-label></div>
                      <div class="col-md-12"><view-label label="Effective Date " class="mb26"
                          value="{{customerBank.effectiveDate  | appDate}}"></view-label>
                      </div>
                      <div class="col-md-12"><view-label label="Account Status  "
                          class="mb26 status-{{customerBank.statusValue}}"
                          value="{{customerBank.statusDescription}}"></view-label></div>
                    </row>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="box h100">
                  <div class="box-header ">
                    Bank Address
                  </div>
                  <div class="box-pad">
                    <row>
                      <div class="col-md-12"><view-label label="Line 1" class="mb26"
                          value="{{customerBank.ientBank.ientAddress.line1}}"></view-label>
                      </div>
                      <div class="col-md-12"><view-label label="Line 2" class="mb26"
                          value="{{customerBank.ientBank.ientAddress.line2}}"></view-label>
                      </div>
                      <div class="col-md-12"><view-label label="Line 3 " class="mb26"
                          value="{{customerBank.ientBank.ientAddress.line3}}"></view-label>
                      </div>

                      <div class="col-md-12"><view-label label="Province" class="mb26"
                          value="{{customerBank.ientBank.ientAddress.provinceDescription}}"></view-label>
                      </div>
                      <div class="col-md-12"><view-label label="Island" class="mb26"
                          value="{{customerBank.ientBank.ientAddress.islandDescription}}"></view-label>
                      </div>
                      <div class="col-md-12"><view-label label="Tikina" class="mb26"
                          value="{{customerBank.ientBank.ientAddress.tikinaDescription}}"></view-label>
                      </div>
                      <div class="col-md-12"><view-label label="Village" class="mb26"
                          value="{{customerBank.ientBank.ientAddress.village}}"></view-label>
                      </div>
                      <div class="col-md-12"><view-label label="PO Box No" class="mb26"
                          value="{{customerBank.ientBank.ientAddress.poBoxNo}}"></view-label>
                      </div>

                    </row>
                  </div>
                </div>
              </div>
            </row>



          </div>
        </scroll>

      </div>
    </div>

    }
    @if(this.createBank){
    <div class="dialog-header">
      <div class="dialog-title"> <ion-icon class="dialog-header-icon"
          src="assets/icons/accordian/customer-service.svg"></ion-icon>
        Customer <ion-icon class="arrow-icon" src="assets/icons/arrow.svg"></ion-icon>Details<ion-icon
          class="arrow-icon" src="assets/icons/arrow.svg"></ion-icon>
        Create
        Bank
      </div>
      <div class="slot-right">
        <div class="btn-group">
          <app-icon-button name="save" toolTip="Save" (click)="saveBankDetails()"
            appButtonAccess="CrmCustAppSaveBtn"></app-icon-button>
          <app-icon-button name="clear" toolTip="Clear" (click)="clearBankDetails()"></app-icon-button>
          <app-icon-button name="close" toolTip="Close" (click)="dialog.closeDialog()"
            appButtonAccess="CrmCustAppCancelBtn"></app-icon-button>
        </div>
      </div>
    </div>
    <div class="dialog-content">
      <div class="dialog-content-inner h100">
        <scroll>
          @if(data.showErrorMessage){
          <div class="error-panel">
            <app-error-message></app-error-message>
          </div>
          }
          <div class="p10">
            <div class="view-label-container-title mb26">Enter Bank Code and to continue</div>
            <form #q="ngForm">
              <row>
                <div class="col-md-8">
                  <form #x="ngForm" class="d-flex align-items-center" (ngSubmit)="viewBankDetailsBasedOnBankCode(x)">

                    <div class="col-md-6"> <app-input-control label="Bank Code" [errorTrue]="errorTrue"
                        [required]="true" [(ngModel)]="bankCodeValue" [maxLength]="20"
                        name="bankCodeValue"></app-input-control></div>
                    <div class="col-md-6"> <button type="submit" class="info-btn">Get Info<ion-icon class="pl10px"
                          name="information-outline"></ion-icon></button></div>



                  </form>
                </div>
              </row>
              @if(createNewBankInfoValues){

              <row>
                <div class="col-md-4">
                  <div class="box h100">
                    <div class="box-header ">
                      Bank Information
                    </div>
                    <div class="box-pad">
                      <row>
                        <div class="col-md-12 mb26"><app-input-control type="text" label="Bank Name"
                            [(ngModel)]="customerBank.ientBank.bankName" [errorTrue]="errorTrue" [required]="true"
                            [maxLength]="50" [btnClicked]="this.customerBank.editableFlag ==='N'"
                            name="bankName"></app-input-control></div>
                        <div class="col-md-12 mb26"><app-input-control type="text" [errorTrue]="errorTrue"
                            [required]="true" label="Bank Code" [(ngModel)]="customerBank.ientBank.bankCode"
                            [btnClicked]="true" [maxLength]="20" name="bankCode"></app-input-control></div>
                        <div class="col-md-12 mb26">
                          <view-label label="Branch" value="{{branchName}}"></view-label>
                        </div>

                        <!-- <div class="col-md-12 mb26"><app-input-control type="text" label="IFSC Code"
                            [(ngModel)]="customerBank.ientBank.ifscCode" [maxLength]="20" [errorTrue]="errorTrue"
                            [required]="true" [btnClicked]="this.customerBank.editableFlag ==='N'"
                            name="ifscCode"></app-input-control></div> -->
                        <div class="col-md-12 mb26"><app-input-control type="text" label="Swift Code"
                            [(ngModel)]="customerBank.ientBank.swiftCode" [errorTrue]="errorTrue" [required]="true"
                            [maxLength]="20" [btnClicked]="this.customerBank.editableFlag ==='N'"
                            name="swiftCode"></app-input-control></div>
                        <div class="col-md-12 mb26">
                          @if(this.customerBank.ientBank.branchTypeValue === 'BRNOF'){
                          <app-input-control type="select" label="Head Office Bank"
                            [items]="initialData.getHeadOfficeBankDDL.DDLBank" key="id" keyName="code"
                            [errorTrue]="errorTrue" [required]="true"
                            [btnClicked]="this.customerBank.editableFlag ==='N'"
                            [(ngModel)]="customerBank.ientBank.headOfficeBankId"
                            name="headOfficeBankId"></app-input-control>
                          }
                        </div>
                      </row>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="box h100">
                    <div class="box-header ">
                      Additional Information
                    </div>
                    <div class="box-pad">
                      <row>
                        <div class="col-md-12 mb26"><app-input-control type="number" label="Account No"
                            [(ngModel)]="customerBank.accountNo" name="accountNo" [errorTrue]="errorTrue"
                            [required]="true" [maxLength]="20"></app-input-control></div>
                        <div class="col-md-12 mb26"><app-input-control type="date" label="Effective Date"
                            [(ngModel)]="customerBank.effectiveDate" name="effectiveDate"></app-input-control></div>
                        <div class="col-md-12 mb26"><app-input-control type="select" label="Account Status"
                            [(ngModel)]="customerBank.statusValue" name="statusValue" [errorTrue]="errorTrue"
                            [required]="true" [btnClicked]="true" [items]="initialData.DDLValues.DDLActiveAndInActive"
                            key="constant" keyName="description"></app-input-control>
                        </div>
                      </row>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="box h100">
                    <div class="box-header ">
                      Bank Address
                    </div>
                    <div class="box-pad">
                      <app-address-edit [ientAddress]="customerBank.ientBank.ientAddress"
                        [btnClicked]="this.customerBank.editableFlag ==='N'" [errorTrue]="errorTrue"
                        type="bank"></app-address-edit>
                    </div>

                  </div>
                </div>
              </row>
              }
            </form>

          </div>
        </scroll>
      </div>
    </div>
    }

    @if(this.editBank){
    <div class="dialog-header">
      <div class="dialog-title"> <ion-icon class="dialog-header-icon"
          src="assets/icons/accordian/customer-service.svg"></ion-icon>
        Customer <ion-icon class="arrow-icon" src="assets/icons/arrow.svg"></ion-icon>Details<ion-icon
          class="arrow-icon" src="assets/icons/arrow.svg"></ion-icon>
        Edit
        Bank
      </div>
      <div class="slot-right">
        <div class="btn-group">
          <app-icon-button name="save" toolTip="Update" (click)="saveEditBankDetails()"
            appButtonAccess="CrmCustAppSaveBtn"></app-icon-button>
          <app-icon-button name="refresh" toolTip="Refresh" (click)="openBankDetails()"></app-icon-button>
          <app-icon-button name="close" toolTip="Close" (click)="dialog.closeDialog()"
            appButtonAccess="CrmCustAppCancelBtn"></app-icon-button>
        </div>
      </div>
    </div>
    <div class="dialog-content">
      <div class="dialog-content-inner h100">

        <scroll>
          @if(data.showErrorMessage){
          <div class="error-panel">
            <app-error-message></app-error-message>
          </div>
          }
          <div class="p10">
            <form #q="ngForm">
              <row>
                <div class="col-md-4">
                  <div class="box h100">
                    <div class="box-header ">
                      Bank Information
                    </div>
                    <div class="box-pad">
                      <row>
                        <div class="col-md-12 mb26"><app-input-control type="text" label="Bank Name"
                            [(ngModel)]="customerBank.ientBank.bankName" [errorTrue]="errorTrue" [required]="true"
                            [maxLength]="50" [btnClicked]="this.customerBank.editableFlag ==='N'"
                            name="bankName"></app-input-control></div>
                        <div class="col-md-12 mb26"><app-input-control type="text" label="Bank Code"
                            [(ngModel)]="customerBank.ientBank.bankCode" [btnClicked]="true" [maxLength]="20"
                            name="bankCode"></app-input-control></div>
                        <div class="col-md-12 mb26">
                          <view-label label="Branch" value="{{branchName}}"></view-label>

                        </div>

                        <!-- <div class="col-md-12 mb26"><app-input-control type="text" label="IFSC Code"
                            [(ngModel)]="customerBank.ientBank.ifscCode" [maxLength]="20" [errorTrue]="errorTrue"
                            [required]="true" [btnClicked]="this.customerBank.editableFlag ==='N'"
                            name="ifscCode"></app-input-control></div> -->
                        <div class="col-md-12 mb26"><app-input-control type="text" label="Swift Code"
                            [(ngModel)]="customerBank.ientBank.swiftCode" [errorTrue]="errorTrue" [required]="true"
                            [maxLength]="20" [btnClicked]="this.customerBank.editableFlag ==='N'"
                            name="swiftCode"></app-input-control></div>

                        <div class="col-md-12 mb26">
                          @if(this.customerBank.ientBank.branchTypeValue === 'BRNOF'){
                          <app-input-control type="select" label="Head Office Bank"
                            [items]="initialData.getHeadOfficeBankDDL.DDLBank" key="id" keyName="code"
                            [errorTrue]="errorTrue" [required]="true"
                            [btnClicked]="this.customerBank.editableFlag ==='N'"
                            [(ngModel)]="customerBank.ientBank.headOfficeBankId"
                            name="headOfficeBankId"></app-input-control>
                          }
                        </div>
                      </row>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="box">
                    <div class="box-header ">
                      Additional Information
                    </div>
                    <div class="box-pad">
                      <row>
                        <div class="col-md-12 mb26"><app-input-control type="number" label="Account No"
                            [(ngModel)]="customerBank.accountNo" name="accountNo" [errorTrue]="errorTrue"
                            [required]="true" [maxLength]="20"></app-input-control></div>
                        <div class="col-md-12 mb26"><app-input-control type="date" label="Effective Date"
                            [(ngModel)]="customerBank.effectiveDate" name="effectiveDate"></app-input-control></div>
                        <div class="col-md-12 mb26"><app-input-control type="select" label="Account Status"
                            [(ngModel)]="customerBank.statusValue" name="statusValue" [errorTrue]="errorTrue"
                            [required]="true" [items]="initialData.DDLValues.DDLActiveAndInActive" key="constant"
                            keyName="description"></app-input-control>
                        </div>
                      </row>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="box">
                    <div class="box-header ">
                      Bank Address
                    </div>
                    <div class="box-pad">
                      <app-address-edit [ientAddress]="customerBank.ientBank.ientAddress"
                        [btnClicked]="this.customerBank.editableFlag ==='N' " [errorTrue]="errorTrue"
                        type="bank"></app-address-edit>
                    </div>

                  </div>
                </div>
              </row>
            </form>
          </div>
        </scroll>
      </div>
    </div>
    }
  </div>

</ng-template>